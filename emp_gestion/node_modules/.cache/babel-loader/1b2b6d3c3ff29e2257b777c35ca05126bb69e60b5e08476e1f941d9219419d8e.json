{"ast":null,"code":"var _jsxFileName = \"D:\\\\ptojects_3i\\\\Gestion_des_employ\\xE9es_SANLAM\\\\employees_management_Sanlam-master\\\\emp_gestion\\\\src\\\\components\\\\\\xE9quipe\\\\UpdateEquipe.js\";\nimport React from \"react\";\nimport '../../page.css';\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport Select from 'react-select';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass UpdateEquipe extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      nom_eq: '',\n      resp_eq: '',\n      start_eq: '',\n      project_run: '',\n      emp_eq: [],\n      // Should be an array\n      emp: [],\n      aa: [],\n      availableEmployees: [] // Initialize with an empty array\n    };\n\n    this.changeHandler = this.changeHandler.bind(this);\n    this.submitted = this.submitted.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n  componentDidMount() {\n    this.fetchData();\n    this.fetchDataEmp();\n  }\n  fetchData() {\n    const id = this.props.match.params.id;\n    fetch('http://127.0.0.1:8000/team/' + id + '/').then(response => response.json()).then(data => {\n      this.setState({\n        nom_eq: data.nom_eq,\n        resp_eq: data.resp_eq,\n        start_eq: data.start_eq,\n        project_run: data.project_run,\n        emp_eq: data.emp_eq,\n        aa: data.aa,\n        availableEmployees: data.emp // Initialize availableEmployees with data from the API\n      });\n    });\n  }\n\n  submitted() {\n    const id = this.props.match.params.id;\n    fetch('http://127.0.0.1:8000/team/' + id + '/', {\n      method: 'PUT',\n      body: JSON.stringify(this.state),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      }\n    }).then(response => response.json());\n\n    // Redirection vers la page racine\n    this.props.history.push('/list_équipes');\n    // Rafraîchir la page après the redirection\n    window.location.reload();\n  }\n  fetchDataEmp() {\n    fetch('http://127.0.0.1:8000/employee/').then(response => response.json()).then(data => {\n      this.setState({\n        emp: data,\n        availableEmployees: data\n      });\n    });\n  }\n  changeHandler(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n  handleChange(selectedOptions) {\n    // Extract the values from selectedOptions and update emp_eq as an array\n    const selectedValues = selectedOptions.map(option => option.value);\n    this.setState({\n      emp_eq: selectedValues\n    });\n  }\n  render() {\n    const empData = this.state.emp;\n    const selects = empData.map(emp => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: emp.id,\n      children: emp.nomComplet\n    }, emp.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this));\n    const dataEmp = this.state.emp;\n    const employees = dataEmp.map(emp => ({\n      value: emp.id,\n      label: emp.nomComplet\n    }));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"page\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingBottom: '140px',\n            paddingTop: '50px',\n            paddingLeft: '400px',\n            paddingRight: '400px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Formulaire de modification d'une \\xE9quipe:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"table table-striped table-bordered text-center \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              style: {\n                marginLeft: '50px',\n                marginRight: '50px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"emp_eq\",\n                children: \"Modifier les employ\\xE9s membres de l'\\xE9quipe:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                isMulti: true,\n                options: employees,\n                onChange: this.handleChange,\n                value: employees.filter(emp => this.state.emp_eq.includes(emp.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default UpdateEquipe;","map":{"version":3,"names":["React","Header","Footer","Select","jsxDEV","_jsxDEV","UpdateEquipe","Component","constructor","state","nom_eq","resp_eq","start_eq","project_run","emp_eq","emp","aa","availableEmployees","changeHandler","bind","submitted","handleChange","componentDidMount","fetchData","fetchDataEmp","id","props","match","params","fetch","then","response","json","data","setState","method","body","JSON","stringify","headers","history","push","window","location","reload","event","target","name","value","selectedOptions","selectedValues","map","option","render","empData","selects","children","nomComplet","fileName","_jsxFileName","lineNumber","columnNumber","dataEmp","employees","label","style","paddingBottom","paddingTop","paddingLeft","paddingRight","textAlign","className","marginLeft","marginRight","htmlFor","isMulti","options","onChange","filter","includes"],"sources":["D:/ptojects_3i/Gestion_des_employées_SANLAM/employees_management_Sanlam-master/emp_gestion/src/components/équipe/UpdateEquipe.js"],"sourcesContent":["import React from \"react\";\r\nimport '../../page.css';\r\nimport Header from \"../../components/Header\";\r\nimport Footer from \"../../components/Footer\";\r\nimport Select from 'react-select';\r\n\r\nclass UpdateEquipe extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      nom_eq: '',\r\n      resp_eq: '',\r\n      start_eq: '',\r\n      project_run: '',\r\n      emp_eq: [], // Should be an array\r\n      emp: [],\r\n      aa: [],\r\n      availableEmployees: [], // Initialize with an empty array\r\n    }\r\n    this.changeHandler = this.changeHandler.bind(this);\r\n    this.submitted = this.submitted.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n    this.fetchDataEmp();\r\n  }\r\n\r\n  fetchData() {\r\n    const id = this.props.match.params.id;\r\n    fetch('http://127.0.0.1:8000/team/' + id + '/')\r\n      .then(response => response.json())\r\n      .then((data) => {\r\n        this.setState({\r\n          nom_eq: data.nom_eq,\r\n          resp_eq: data.resp_eq,\r\n          start_eq: data.start_eq,\r\n          project_run: data.project_run,\r\n          emp_eq: data.emp_eq,\r\n          aa: data.aa,\r\n          availableEmployees: data.emp, // Initialize availableEmployees with data from the API\r\n        });\r\n      });\r\n  }\r\n\r\n  submitted() {\r\n    const id = this.props.match.params.id;\r\n    fetch('http://127.0.0.1:8000/team/' + id + '/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(this.state),\r\n      headers: { 'Content-type': 'application/json; charset=UTF-8', }\r\n    })\r\n      .then(response => response.json());\r\n\r\n    // Redirection vers la page racine\r\n    this.props.history.push('/list_équipes');\r\n    // Rafraîchir la page après the redirection\r\n    window.location.reload();\r\n  }\r\n\r\n  fetchDataEmp() {\r\n    fetch('http://127.0.0.1:8000/employee/')\r\n      .then(response => response.json())\r\n      .then((data) => {\r\n        this.setState({\r\n          emp: data,\r\n          availableEmployees: data,\r\n        });\r\n      });\r\n  }\r\n\r\n  changeHandler(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  handleChange(selectedOptions) {\r\n    // Extract the values from selectedOptions and update emp_eq as an array\r\n    const selectedValues = selectedOptions.map(option => option.value);\r\n    this.setState({ emp_eq: selectedValues });\r\n  }\r\n\r\n  render() {\r\n    const empData = this.state.emp;\r\n    const selects = empData.map((emp) =>\r\n      <option value={emp.id} key={emp.id}>{emp.nomComplet}</option>\r\n    );\r\n\r\n    const dataEmp = this.state.emp;\r\n    const employees = dataEmp.map((emp) => ({\r\n      value: emp.id,\r\n      label: emp.nomComplet,\r\n    }));\r\n    \r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div id=\"page\">\r\n          <div style={{ paddingBottom: '140px', paddingTop: '50px', paddingLeft: '400px', paddingRight: '400px', textAlign: 'center' }}>\r\n            <h2>Formulaire de modification d'une équipe:</h2>\r\n            <br />\r\n            <form className=\"table table-striped table-bordered text-center \">\r\n              {/* Other form elements */}\r\n              <div className=\"form-group\" style={{ marginLeft: '50px', marginRight: '50px' }}>\r\n                <label htmlFor=\"emp_eq\">Modifier les employés membres de l'équipe:</label>\r\n                <Select\r\n                  isMulti\r\n                  options={employees}\r\n                  onChange={this.handleChange}\r\n                  value={employees.filter(emp => this.state.emp_eq.includes(emp.value))}\r\n                />\r\n                <br />\r\n              </div>\r\n              {/* Other form elements */}\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UpdateEquipe;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}